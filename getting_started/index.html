<!DOCTYPE html>
<html>
<head>
	<title>Blockly Demo</title>

	<script src="blockly_compressed.js"></script>
	<script src="blocks_compressed.js"></script>
	<script src="msg/js/en.js"></script>
	<script src="javascript_compressed.js"></script>
</head>
<body>
	<div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
	<xml id="toolbox" style="display: none">
		<block type="controls_if"></block>
		<block type="controls_repeat_ext"></block>
		<block type="logic_compare"></block>
		<block type="math_number"></block>
		<block type="math_arithmetic"></block>
		<block type="text"></block>
		<block type="text_print"></block>
	</xml>
	<textarea id="textarea"></textarea>
	<script>
		var workspace = Blockly.inject('blocklyDiv',
			{toolbox: document.getElementById('toolbox')});

		function myUpdateFunction(event) {
			var code = Blockly.JavaScript.workspaceToCode(workspace);
			document.getElementById('textarea').value = code;
			var xml = Blockly.Xml.workspaceToDom(workspace);
			var xml_text = Blockly.Xml.domToText(xml);
			console.log(xml_text)
		}
		workspace.addChangeListener(myUpdateFunction);
	</script>
</body>
</html>